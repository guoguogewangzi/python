import re
import csv

data = """
198.235.24.82 (美国)加入 IP 组
172.232.37.65 (美国)加入 IP 组
35.203.210.124 (英国)加入 IP 组
198.235.24.225 (美国)加入 IP 组
34.140.248.32 (比利时)加入 IP 组
51.89.111.7 (德国)加入 IP 组
205.210.31.96 (美国)加入 IP 组
205.210.31.35 (美国)加入 IP 组
172.233.57.47 (美国)加入 IP 组
35.233.62.116 (比利时)加入 IP 组
35.203.210.194 (英国)加入 IP 组
91.92.241.63 (保加利亚)加入 IP 组
198.235.24.120 (美国)加入 IP 组
35.203.211.148 (英国)加入 IP 组
95.214.53.103 (波兰)加入 IP 组
162.216.149.176 (美国)加入 IP 组
220.196.160.76 (上海市)加入 IP 组
205.210.31.246 (美国)加入 IP 组
34.78.249.41 (比利时)加入 IP 组
35.203.211.70 (英国)加入 IP 组
180.101.245.252 (江苏省)加入 IP 组
179.43.134.18 (瑞士)加入 IP 组
35.195.93.98 (比利时)加入 IP 组
35.203.211.13 (英国)加入 IP 组
198.235.24.133 (美国)加入 IP 组
162.216.149.218 (美国)加入 IP 组
163.172.4.129 (法国)加入 IP 组
220.196.160.154 (上海市)加入 IP 组
220.196.160.84 (上海市)加入 IP 组
198.235.24.245 (美国)加入 IP 组
172.104.131.56 (德国)加入 IP 组
34.79.162.186 (比利时)加入 IP 组
198.235.24.166 (美国)加入 IP 组
162.216.149.109 (美国)加入 IP 组
220.196.160.75 (上海市)加入 IP 组
220.196.160.101 (上海市)加入 IP 组
35.187.98.121 (比利时)加入 IP 组
220.196.160.101 (上海市)加入 IP 组
130.211.54.158 (比利时)加入 IP 组
205.210.31.161 (巴西)加入 IP 组
162.216.149.23 (美国)加入 IP 组
176.97.206.68 (美国)加入 IP 组
42.194.233.78 (广东省)加入 IP 组
223.104.68.151 (广东省)加入 IP 组
223.104.68.151 (广东省)加入 IP 组
223.104.68.151 (广东省)加入 IP 组
223.104.68.151 (广东省)加入 IP 组
"""

# 使用正则表达式提取IP和地理位置
pattern = re.compile(r"(\d+\.\d+\.\d+\.\d+) \((.*?)\)加入 IP 组")
matches = pattern.findall(data)

# 创建CSV文件
with open("ip_geolocation.csv", mode="w", newline="", encoding="utf-8") as file:
    writer = csv.writer(file)
    writer.writerow(["IP", "Location"])
    writer.writerows(matches)

print("CSV文件已生成：ip_geolocation.csv")


'''
下一步计划：
自动化爬取数据并处理数据，地址如下：
https://42.194.233.78:9443/events?page=1&size=100&order=[]&params={%22event%22%3A{%22start%22%3A1701360000000%2C%22end%22%3A1702569540000}%2C%22tab%22%3A%22event%22}

'''



